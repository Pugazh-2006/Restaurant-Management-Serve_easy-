<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

</head>
<body>
    <div class="menu-page">
        <h1>Welcome, {{ session['username'] }} üç¥</h1>
        <label for="searchBar" class="search-label">üîç Search your favorite dish:</label>
        <input type="text" id="searchBar" placeholder="Search for a dish..." />
        <a href="/cart" class="cart-link">üõí View Cart
            <span class="cart-count">({{ session['cart']|length if session.get('cart') else 0 }})</span>
        </a>
        <div class = "menu-container">
            {% for item in items %}
            <div class="menu-card">
                <img src="{{ url_for('static', filename='images/' + item[3]) }}" alt="{{ item[1]  }}" >
                <h2>{{ item[1]  }}</h2>
                <p class="description"> {{ item[4] }}</p>
                <p class="price"><span class="rupee">‚Çπ</span> {{ item[2] }}</p>
                <form method="POST" action="/add_to_cart">
                    <input type="hidden" name="item_id" value="{{ item[0]}}">
                    <button type="submit">Add to Carts</button>
                </form>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>

<script>
    const searchBar = document.getElementById('searchBar');
    searchBar.addEventListener('keyup', function() {
        const query = searchBar.value.toLowerCase();
        const cards = document.getElementsByClassName('menu-card');

        for(let card of cards) {
            const title = card.querySelector('h2').textContent.toLowerCase();
            card.style.display = title.includes(query) ? 'block' : 'none';
        }
    } );
</script>